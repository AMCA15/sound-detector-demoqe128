/*
 * Filter.c
 *
 *  Created on: Apr 26, 2019
 *      Author: Anderson
 */

#include "Filter.h"

char FilterState;
char fpos = 255;

char signed Coeff[ORDER] = {0,  0,  0,   0, 0, 0,  0,  0, 1, 0,   -1, 0,  1,
                            0,  -2, 0,   3, 0, -5, 0,  7, 0, -13, 0,  41, 64,
                            41, 0,  -13, 0, 7, 0,  -5, 0, 3, 0,   -2, 0,  1,
                            0,  -1, 0,   1, 0, 0,  0,  0, 0, 0,   0,  0};
char signed NewCoeff[ORDER];
char FilterIn[ORDER];
int FilterOut;

// Test Data
char TestNumber;
char TestData[TESTSIZE] = {
    21,  102, 40,  68, 22, 78, 34,  84,  89,  96,  58,  11, 30,  117, 20,
    106, 69,  127, 11, 57, 14, 124, 1,   100, 105, 112, 11, 52,  34,  103,
    56,  117, 24,  34, 19, 18, 112, 75,  71,  19,  110, 80, 45,  66,  52,
    10,  31,  16,  24, 31, 54, 7,   116, 121, 63,  63,  44, 116, 48,  15,
    100, 50,  31,  52, 13, 17, 121, 123, 74,  8,   31,  46, 106, 2,   6,
    22,  84,  94,  83, 58, 71, 38,  96,  25,  88,  24,  48, 81,  100, 11,
    119, 100, 63,  56, 58, 40, 66,  66,  105, 102};
int TestDataFiltered[TESTSIZE] = {
    0,     0,     0,     0,     0,     0,     0,     0,     21,    102,
    19,    -34,   3,     112,   10,    -130,  60,    260,   -26,   -463,
    6,     642,   -131,  -1180, 555,   5172,  8612,  8459,  6634,  5926,
    5934,  6989,  9967,  12577, 11063, 6068,  3697,  5679,  8180,  9002,
    10326, 11986, 10586, 6445,  4588,  6128,  7482,  7923,  10299, 13309,
    11851, 6301,  3344,  5910,  10246, 11886, 10282, 6609,  2362,  1546,
    6056,  10934, 10813, 7465,  6886,  9650,  10747, 8653,  6563,  5576,
    3739,  1881,  2321,  4177,  4019,  3230,  6409,  12197, 14020, 10286,
    7031,  8173,  10044, 8569,  5882,  6258,  8419,  7562,  3134,  738,
    5414,  13581, 15930, 9271,  1888,  2590,  8597,  9542,  3616,  -500};

void UpdateCoeff(char *newcoeff) {
    char i;
    for (i = 0; i < ORDER; i++) {
        Coeff[i] = newcoeff[i];
    }
}
